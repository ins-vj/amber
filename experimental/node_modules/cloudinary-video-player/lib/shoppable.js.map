{"version":3,"file":"shoppable.js","mappings":"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","sources":["webpack:///./utils/matches.js","webpack:///./components/shoppable-bar/shoppable-widget.const.js","webpack:///./components/shoppable-bar/layout/shoppable-products-overlay.js","webpack:///./components/shoppable-bar/layout/shoppable-panel-toggle.js","webpack:///./components/shoppable-bar/layout/bar-layout.js","webpack:///./components/shoppable-bar/panel/shoppable-panel-item.js","webpack:///./components/shoppable-bar/panel/shoppable-panel.js","webpack:///./components/shoppable-bar/shoppable-post-widget.js","webpack:///./components/shoppable-bar/shoppable-widget.js","webpack:///./utils/throttle.js","webpack:///./utils/time.js"],"sourcesContent":["\n// Test for matches()/\nconst elMatches = (el, selector) => {\n  let p = Element.prototype;\n  let f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function (s) {\n    return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n  };\n  return f.call(el, selector);\n};\n\nexport { elMatches };\n","export const SHOPPABLE_WIDGET_OPTIONS_DEFAULTS = {\n  location: 'right',\n  toggleIcon: '',\n  width: '20%',\n  startState: 'openOnPlay',\n  autoClose: 2,\n  transformation: {\n    quality: 'auto',\n    width: 'auto',\n    fetch_format: 'auto',\n    crop: 'scale'\n  },\n  products: [],\n  showPostPlayOverlay: false\n};\n\nexport const SHOPPABLE_CLICK_ACTIONS = {\n  GO_TO: 'goto',\n  SEEk: 'seek'\n};\n\nexport const SHOPPABLE_HOVER_ACTIONS = {\n  OVERLAY: 'overlay'\n};\n\nexport const SHOPPABLE_PANEL_VISIBLE_CLASS = 'shoppable-panel-visible';\n\nexport const SHOPPABLE_PANEL_HIDDEN_CLASS = 'shoppable-panel-hidden';\n\nexport const SHOPPABLE_PRODUCTS_OVERLAY_CLASS = 'shoppable-products-overlay';\n\nexport const CLD_SPBL_PANEL_CLASS = 'cld-spbl-panel';\n\nexport const CLD_SPBL_TOGGLE_CLASS = 'cld-spbl-toggle';\n\nexport const CLD_SPBL_TOGGLE_ICON_CLASS = 'cld-spbl-toggle-icon';\n\nexport const CLD_SPBL_INNER_BAR = 'cld-spbl-bar-inner';\n\nexport const CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS = 'cld-spbl-toggle-custom-icon';\n\nexport const ICON_CART_CLASS = 'vjs-icon-cart';\n\nexport const CLOSE_ICON_CLASS = 'vjs-icon-close';\n\nexport const SHOPPABLE_ANIMATION_CLASS = 'animate';\n\nexport const CLD_SPBL_ITEM = 'cld-spbl-item';\n\nexport const CLD_SPBL_IMAGE = 'cld-spbl-img';\n","import videojs from 'video.js';\nconst dom = videojs.dom || videojs;\nimport { parseTime } from 'utils/time';\nimport { find } from 'utils/find';\nimport {\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_PRODUCTS_OVERLAY_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nconst Component = videojs.getComponent('Component');\n\nclass ShoppableProductsOverlay extends Component {\n\n  constructor(player, options = {}) {\n    super(player, options);\n    this.options_ = options;\n    this.player_ = player;\n\n    this.player_.on(PLAYER_EVENT.SHOW_PRODUCTS_OVERLAY, this.renderProducts);\n\n    this.dispose = () => {\n      this.layout_.dispose();\n    };\n  }\n\n  renderProducts = () => {\n    // Close products side-panel\n    this.player_.removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n    this.player_.addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n    this.player_.addClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n\n    this.layout_.innerHTML = '';\n\n    // Filter products with appearance on currentTime\n    const currentTime = this.player_.currentTime();\n    const currentProducts = this.options_.products.filter(product => product.hotspots && product.hotspots.some(a => parseTime(a.time) === currentTime));\n\n    currentProducts.forEach(product => {\n      const hotspot = find(product.hotspots, (hs) => parseTime(hs.time) === currentTime);\n\n      const productName = dom.createEl('div',\n        { className: 'cld-spbl-product-hotspot-name' },\n        {},\n        product.productName\n      );\n      const productTooltip = dom.createEl('div',\n        { className: 'cld-spbl-product-tooltip cld-spbl-product-tooltip-' + hotspot.tooltipPosition },\n        {},\n        productName\n      );\n      const productHotSpot = dom.createEl('a',\n        {\n          className: 'cld-spbl-product-hotspot accent-color-text',\n          href: hotspot.clickUrl,\n          target: '_blank'\n        },\n        { style: 'left:' + hotspot.x + '; top:' + hotspot.y + ';' },\n        productTooltip\n      );\n\n      this.layout_.appendChild(productHotSpot);\n    });\n\n    // Remove\n    this.player_.one(PLAYER_EVENT.SEEKING, this.clearLayout);\n    this.player_.one(PLAYER_EVENT.PLAY, this.clearLayout);\n  }\n\n  clearLayout = () => {\n    this.layout_.innerHTML = '';\n    this.player_.removeClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n  }\n\n  createEl() {\n    const dimensions = this.player_.currentDimensions();\n\n    this.layout_ = dom.createEl('div', {\n      className: 'cld-spbl-products-overlay',\n      style: `padding-top: ${dimensions.height / dimensions.width * 100}%;`\n    });\n\n    return this.layout_;\n  }\n\n}\n\nvideojs.registerComponent('ShoppableProductsOverlay', ShoppableProductsOverlay);\n\nexport default ShoppableProductsOverlay;\n","import videojs from 'video.js';\nimport {\n  CLD_SPBL_TOGGLE_CLASS,\n  CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS,\n  CLD_SPBL_TOGGLE_ICON_CLASS,\n  CLOSE_ICON_CLASS,\n  ICON_CART_CLASS,\n  SHOPPABLE_ANIMATION_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\nconst dom = videojs.dom || videojs;\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass ShoppablePanelToggle extends ClickableComponent {\n\n  constructor(player, options) {\n    super(player, options);\n    this.options_ = options;\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.options_.clickHandler();\n  }\n\n  createEl() {\n    let iconProps = {};\n    let iconAttrs = {};\n    if (this.options_.toggleIcon) {\n      iconProps = {\n        className: `${CLD_SPBL_TOGGLE_ICON_CLASS} ${CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS} ${CLOSE_ICON_CLASS}`\n      };\n      iconAttrs = {\n        style: `background-image: url(${this.options_.toggleIcon})`\n      };\n    } else {\n      iconProps = {\n        className: `${CLD_SPBL_TOGGLE_ICON_CLASS} ${ICON_CART_CLASS}`\n      };\n    }\n    const icon = dom.createEl('span', iconProps, iconAttrs);\n\n    const el = super.createEl('a', {\n      className: `${CLD_SPBL_TOGGLE_CLASS} base-color-bg`\n    });\n    el.appendChild(icon);\n\n    this.player_.on(PLAYER_EVENT.PRODUCT_BAR_MIN, () => {\n      setTimeout(() => {\n        icon.classList.add(SHOPPABLE_ANIMATION_CLASS);\n        setTimeout(() => {\n          icon.classList.remove(SHOPPABLE_ANIMATION_CLASS);\n        }, 1000);\n      }, 500);\n    });\n\n    return el;\n  }\n}\n\nvideojs.registerComponent('shoppablePanelToggle', ShoppablePanelToggle);\n\nexport default ShoppablePanelToggle;\n","\nimport videojs from 'video.js';\nimport { elMatches } from 'utils/matches';\n\nconst dom = videojs.dom || videojs;\nconst Component = videojs.getComponent('Component');\nimport ShoppableProductsOverlay from './shoppable-products-overlay';\nimport ShoppablePanelToggle from './shoppable-panel-toggle';\nimport {\n  CLD_SPBL_INNER_BAR,\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nclass ShoppableBarLayout extends Component {\n  constructor(player, options) {\n    super(player, options);\n    this.player_ = player;\n\n    this.player().addClass('cld-shoppable-panel');\n    this.player().addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n\n    this.contentWrpEl_ = dom.createEl('div', { className: 'cld-spbl-bar' });\n\n    this.contentBannerEl_ = dom.createEl('div', { className: 'cld-spbl-banner-msg base-color-text' }, {}, this.options_.bannerMsg || 'Shop the Video');\n    this.contentWrpEl_.appendChild(this.contentBannerEl_);\n\n    const productsOverlay = new ShoppableProductsOverlay(this.player_, this.options_);\n    this.contentWrpEl_.appendChild(productsOverlay.el_);\n\n    this.contentEl_ = dom.createEl('div', { className: CLD_SPBL_INNER_BAR });\n    this.contentWrpEl_.appendChild(this.contentEl_);\n\n    this.player().el().appendChild(this.contentWrpEl_);\n\n    this.addChild(new ShoppablePanelToggle(this.player_, {\n      toggleIcon: this.options_.toggleIcon,\n      clickHandler: () => {\n        this.togglePanel();\n      }\n    }));\n\n    this.addChild('ShoppablePanel', this.options_);\n\n    this.dispose = () => {\n      this.removeLayout();\n      super.dispose();\n    };\n\n    this.togglePanel = (open) => {\n      if (open === true) {\n        // Open\n        this.player().removeClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n        this.player().addClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n      } else if (open === false) {\n        // Close\n        this.player().removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n        this.player().addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n      } else {\n        // Toggle\n        this.player().toggleClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n        this.player().toggleClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n      }\n      let eventName = this.player().hasClass(SHOPPABLE_PANEL_VISIBLE_CLASS) ? 'productBarMax' : 'productBarMin';\n      this.player().trigger(eventName);\n    };\n\n    // Open shoppable\n    if (this.options_.startState === 'open') {\n      this.togglePanel(true);\n    }\n\n    // On play start\n    this.player_.on(PLAYER_EVENT.PLAY, () => {\n      if (this.player_.currentTime() < 0.01) {\n\n        // Open shoppable on-play\n        if (this.options_.startState === 'openOnPlay') {\n          this.togglePanel(true, this.options_.autoClose);\n        }\n\n        // Auto-close shoppable\n        if (this.options_.autoClose && this.options_.startState.indexOf('open') !== -1) {\n          setTimeout(() => {\n            // Keep it open while hovered\n            if (!elMatches(this.contentEl_, ':hover')) {\n              this.togglePanel(false);\n            } else {\n              this.contentEl_.addEventListener('mouseleave', () => {\n                this.togglePanel(false);\n              }, { once: true });\n            }\n          }, this.options_.autoClose * 1000);\n        }\n\n      }\n\n    });\n  }\n\n  createEl() {\n    const el = super.createEl('div');\n\n    return el;\n  }\n\n}\n\nvideojs.registerComponent('shoppableBarLayout', ShoppableBarLayout);\n\nexport default ShoppableBarLayout;\n","import videojs from 'video.js';\nimport { elMatches } from 'utils/matches';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\nconst dom = videojs.dom || videojs;\nimport ImageSource from '../../../plugins/cloudinary/models/image-source';\nimport {\n  CLD_SPBL_IMAGE,\n  CLD_SPBL_ITEM,\n  SHOPPABLE_CLICK_ACTIONS,\n  SHOPPABLE_HOVER_ACTIONS\n} from '../shoppable-widget.const';\n\nconst widthTransformation = { width: 132 };\n\nclass ShoppablePanelItem extends ClickableComponent {\n\n  constructor(player, initOptions) {\n    super(player, initOptions);\n    this.options_ = initOptions;\n    this.isDragged = false;\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!elMatches(this.el_, `.dragged .${CLD_SPBL_ITEM}`)) {\n      // Prevent click event if dragged\n      this.options_.clickHandler(event);\n    }\n    this.isDragged = false;\n  }\n\n  getTitle() {\n    return this.options_.conf.title;\n  }\n\n  createEl() {\n    const el = super.createEl('a', {\n      className: `${CLD_SPBL_ITEM} base-color-bg accent-color-text`,\n      href: '#'\n    });\n\n    el.setAttribute('data-product-id', this.options_.conf.productId || '');\n    el.setAttribute('data-product-name', this.options_.conf.productName || '');\n\n    if (this.options_.conf.onHover) {\n      addOnHover(el, this.options_.conf.onHover, this.options_.item.cloudinaryConfig());\n    }\n    if (this.options_.conf.onClick) {\n      addOnClick(el, this.options_.conf.onClick);\n    }\n\n    const img = super.createEl('img',\n      { className: CLD_SPBL_IMAGE },\n      { src: this.options_.item.url(widthTransformation) }\n    );\n\n    el.appendChild(img);\n\n    if (this.getTitle()) {\n      const info = dom.createEl('div', { className: 'cld-spbl-item-info base-color-semi-bg text-color-text' });\n      const title = dom.createEl('span', { className: 'cld-spbl-item-title' }, {}, this.getTitle());\n      info.appendChild(title);\n      el.appendChild(info);\n    }\n\n    return el;\n  }\n}\n\nconst addOnHover = (el, conf, cldConf) => {\n  el.setAttribute('data-hover-action', conf.action);\n  if (conf.action === SHOPPABLE_HOVER_ACTIONS.OVERLAY) {\n    const overlayText = dom.createEl('span', { className: 'cld-spbl-overlay-text base-color-text' }, {}, conf.args);\n    const overlay = dom.createEl('span', { className: 'cld-spbl-overlay text-color-semi-bg base-color-text' }, { title: conf.args }, overlayText);\n    el.appendChild(overlay);\n  } else {\n\n    const switchImgSource = new ImageSource(conf.args.publicId, {\n      cloudinaryConfig: cldConf,\n      transformation: conf.args.transformation\n    });\n\n    const hoverImg = dom.createEl('img',\n      { className: `${CLD_SPBL_IMAGE} cld-spbl-hover-img` },\n      { src: switchImgSource.url(widthTransformation) }\n    );\n\n    el.appendChild(hoverImg);\n  }\n};\n\nconst addOnClick = (el, conf) => {\n  el.setAttribute('data-click-action', conf.action);\n  el.setAttribute('data-pause', conf.pause);\n  if (conf.action === SHOPPABLE_CLICK_ACTIONS.SEEk) {\n    el.setAttribute('data-seek', conf.args.time);\n  } else if (conf.action === SHOPPABLE_CLICK_ACTIONS.GO_TO) {\n    el.setAttribute('data-goto-url', conf.args.url);\n  }\n};\n\nvideojs.registerComponent('shoppablePanelItem', ShoppablePanelItem);\n\nexport default ShoppablePanelItem;\n","import videojs from 'video.js';\nimport { assign } from 'utils/assign';\nimport { throttle } from 'utils/throttle';\nimport { parseTime } from 'utils/time';\nimport ShoppablePanelItem from './shoppable-panel-item';\nimport ImageSource from '../../../plugins/cloudinary/models/image-source';\nimport {\n  CLD_SPBL_PANEL_CLASS,\n  SHOPPABLE_CLICK_ACTIONS,\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_PRODUCTS_OVERLAY_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nconst Component = videojs.getComponent('Component');\n\nclass ShoppablePanel extends Component {\n\n  constructor(player, options = {}) {\n    super(player, options);\n    this.options = options;\n\n    const itemChangeHandler = () => {\n      this.render();\n    };\n\n    player.on(PLAYER_EVENT.SHOPPABLE_ITEM_CHANGED, itemChangeHandler);\n\n    this.render();\n\n    this.dispose = () => {\n      super.dispose();\n      player.off(PLAYER_EVENT.SHOPPABLE_ITEM_CHANGED, itemChangeHandler);\n    };\n  }\n\n  createEl() {\n    const el = super.createEl();\n    [CLD_SPBL_PANEL_CLASS, 'base-color-bg'].map(cls => el.classList.add(cls));\n    return el;\n  }\n\n  removeAll() {\n    const childrens = this.children();\n    for (let i = childrens.length - 1; i >= 0; --i) {\n      this.removeChild(childrens[i]);\n    }\n  }\n\n  getItems() {\n    const cloudinaryConfig = this.player_.cloudinary.cloudinaryConfig();\n    return this.options.products.map(product => {\n      if (product.onHover && typeof product.onHover.args === 'object') {\n        product.onHover.args.transformation = assign({},\n          this.options.transformation,\n          product.onHover.args.transformation\n        );\n      }\n      const conf = {\n        productId: product.productId,\n        productName: product.productName,\n        title: product.title,\n        onHover: product.onHover,\n        onClick: product.onClick,\n        startTime: product.startTime,\n        endTime: product.endTime\n      };\n      const imageSource = new ImageSource(product.publicId, {\n        cloudinaryConfig: cloudinaryConfig,\n        transformation: assign({}, this.options.transformation, product.transformation)\n      });\n      return {\n        imageSrc: imageSource,\n        conf: conf\n      };\n    });\n  }\n\n  scrollToActiveItem() {\n    const activeItems = this.el_.getElementsByClassName('active');\n    if (activeItems.length > 0) {\n      const toScroll = activeItems[0].offsetTop - 12;\n      // Test for native scrollTo support (IE will fail)\n      if ('scrollBehavior' in document.documentElement.style) {\n        this.el_.scrollTo({\n          top: toScroll,\n          behavior: 'smooth'\n        });\n      } else {\n        this.el_.scrollTop = toScroll;\n      }\n    }\n  }\n\n  render() {\n    this.removeAll();\n\n    const items = this.getItems();\n\n    const throttledScrollToActiveItem = throttle(() => this.scrollToActiveItem(), 1000);\n\n    items.forEach((item, index) => {\n      const shoppablePanelItem = new ShoppablePanelItem(this.player(), {\n        item: item.imageSrc,\n        conf: item.conf,\n        next: index === 1,\n        current: index === 0,\n        clickHandler: (e) => {\n          let target = e.currentTarget || e.target;\n          let evName = this.player_.ended() ? 'productClickPost' : 'productClick';\n          this.player_.trigger(evName, { productId: target.dataset.productId, productName: target.dataset.productName });\n\n          // Go to URL, or seek video (set currentTime)\n          if (target.dataset.clickAction === SHOPPABLE_CLICK_ACTIONS.GO_TO) {\n            window.open(target.dataset.gotoUrl, '_blank');\n          } else if (target.dataset.clickAction === SHOPPABLE_CLICK_ACTIONS.SEEk) {\n            const gotoSecs = parseTime(target.dataset.seek);\n            if (gotoSecs !== null) {\n              this.player_.addClass('vjs-has-started'); // Hide the poster image\n              if (this.player_.postModal) {\n                this.player_.postModal.close();\n              }\n              this.player_.currentTime(gotoSecs);\n              // Close products side-panel\n              this.player_.removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n              this.player_.addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n              this.player_.addClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n              // Wait for the time update and show the tooltips\n              this.player_.one('seeked', () => this.player_.trigger('showProductsOverlay'));\n            }\n          }\n\n          // pause - true (default), false, or number of seconds\n          if (target.dataset.pause !== 'false') {\n            this.player_.pause();\n            if (parseTime(target.dataset.pause)) {\n              setTimeout(() => {\n                this.player_.play();\n              }, parseTime(target.dataset.pause) * 1000);\n            }\n          }\n        }\n      });\n\n      shoppablePanelItem.on('mouseover', e => {\n        let target = e.currentTarget || e.target;\n        let evName = this.player_.ended() ? 'productHoverPost' : 'productHover';\n        this.player_.trigger(evName, { productId: target.dataset.productId, productName: target.dataset.productName });\n      });\n\n      if (typeof item.conf.startTime !== 'undefined' && typeof item.conf.endTime !== 'undefined') {\n        this.player_.on(PLAYER_EVENT.TIME_UPDATE, () => {\n          const time = this.player_.currentTime();\n          if (time >= item.conf.startTime && time < item.conf.endTime) {\n            shoppablePanelItem.el_.classList.add('active');\n            throttledScrollToActiveItem();\n          } else if (shoppablePanelItem.el_.classList.contains('active')) {\n            shoppablePanelItem.el_.classList.remove('active');\n          }\n        });\n      }\n\n      this.addChild(shoppablePanelItem);\n\n    });\n\n  }\n}\n\nvideojs.registerComponent('shoppablePanel', ShoppablePanel);\n\nexport default ShoppablePanel;\n","import videojs from 'video.js';\nimport ShoppablePanel from './panel/shoppable-panel.js';\nimport { CLD_SPBL_PANEL_CLASS } from './shoppable-widget.const';\nconst dom = videojs.dom || videojs;\n\nclass ShoppablePostWidget {\n  constructor(player, options = {}) {\n    this.options_ = { ...options, postPlay: true };\n    this.player_ = player;\n    this.render();\n\n    // Handle drag-to-scroll\n    this.handleDragToScroll();\n\n    this.dispose = () => {\n      this.layout_.dispose();\n    };\n  }\n\n  handleDragToScroll() {\n    const postModal = this.player_.postModal.el_;\n    const slider = postModal.querySelector(`.${CLD_SPBL_PANEL_CLASS}`);\n\n    let isDown = false;\n    let startX = 0;\n    let scrollLeft = 0;\n\n    slider.addEventListener('mousedown', (e) => {\n      isDown = true;\n      startX = e.pageX - slider.offsetLeft;\n      scrollLeft = slider.scrollLeft;\n    });\n\n    document.addEventListener('mouseup', (e) => {\n      isDown = false;\n      setTimeout(() => {\n        slider.classList.remove('dragged');\n      }, 300);\n\n      const x = e.pageX - slider.offsetLeft;\n      const walk = x - startX;\n      if (Math.abs(walk) > 5) {\n        e.preventDefault();\n      }\n    });\n\n    document.addEventListener('mousemove', (e) => {\n      if (!isDown) {\n        return;\n      }\n      e.preventDefault();\n      const x = e.pageX - slider.offsetLeft;\n      const walk = (x - startX);\n      slider.scrollLeft = scrollLeft - walk;\n      if (Math.abs(walk) > 5 && !slider.classList.contains('dragged')) {\n        slider.classList.add('dragged');\n      }\n    });\n  }\n\n  render() {\n\n    this.player_.postModal = null;\n\n    const el = dom.createEl('div', { className: 'cld-spbl-post-play' });\n    const panel = new ShoppablePanel(this.player_, this.options_);\n\n    const title = dom.createEl('div', { className: 'cld-spbl-post-title base-color-text' }, {}, this.options_.bannerMsg || 'Shop the Video');\n\n    // Background - poster + blur effect\n    const bgSrc = this.player_.cloudinary.currentPoster();\n\n    bgSrc.transformation([\n      bgSrc.transformation().toOptions ? bgSrc.transformation().toOptions() : {},\n      { effect: 'blur:3000' }\n    ]);\n\n    const panelBg = dom.createEl('div', {\n      className: 'cld-spbl-post-play-bg',\n      style: `background-image: url(\"${bgSrc.url()}\")`\n    });\n\n    const replayBtn = dom.createEl('button',\n      {\n        className: 'cld-spbl-replay-btn base-color-bg vjs-icon-replay',\n        onclick: () => {\n          this.player_.trigger('replay');\n          this.player_.postModal.close();\n          this.player_.play();\n        }\n      },\n      {},\n      'Replay'\n    );\n\n    el.appendChild(panelBg);\n    el.appendChild(title);\n    el.appendChild(panel.el());\n    el.appendChild(replayBtn);\n\n    this.player_.postModal = this.player_.createModal(el, { name: 'postModal', uncloseable: true });\n\n    this.player_.addClass('cld-spbl-post-modal');\n    this.player_.postModal.on('beforemodalclose', () => {\n      this.player_.removeClass('cld-spbl-post-modal');\n    });\n  }\n\n}\n\nexport default ShoppablePostWidget;\n","import videojs from 'video.js';\nimport ShoppableBarLayout from './layout/bar-layout';\nimport ShoppablePostWidget from './shoppable-post-widget';\nimport './shoppable-widget.scss';\nimport {\n  CLD_SPBL_INNER_BAR,\n  CLD_SPBL_PANEL_CLASS,\n  CLD_SPBL_TOGGLE_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_WIDGET_OPTIONS_DEFAULTS\n} from './shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../utils/consts';\n\n\nclass ShoppableWidget {\n\n  constructor(player, initOptions = {}) {\n    this.options_ = videojs.obj.merge(SHOPPABLE_WIDGET_OPTIONS_DEFAULTS, initOptions);\n    this.player_ = player;\n\n    if (this.options_.showPostPlayOverlay) {\n      this.player_.on(PLAYER_EVENT.ENDED, () => {\n        this.player_.addChild(new ShoppablePostWidget(this.player_, this.options_));\n      });\n    }\n\n\n    const width = this.options_.width;\n\n    this._injectCSS(`\n      .${CLD_SPBL_INNER_BAR} {\n        transform: translateX(${width});\n      }\n      .${SHOPPABLE_PANEL_VISIBLE_CLASS} .vjs-control-bar {\n        width: calc(100% - ${width});\n      }\n      .${CLD_SPBL_TOGGLE_CLASS} {\n        right: ${width};\n      }\n      .${CLD_SPBL_PANEL_CLASS}{\n        width: ${width};\n      }\n    `);\n\n    this._setListeners();\n  }\n\n  _setListeners() {\n    const resizeHandler = this._resizeHandler.bind(this);\n\n    this.player_.on(PLAYER_EVENT.RESIZE, resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n\n    this.dispose = () => {\n      this.player_.off(PLAYER_EVENT.RESIZE, resizeHandler);\n      window.removeEventListener('resize', resizeHandler);\n      this.layout_.dispose();\n    };\n  }\n\n  _injectCSS(css) {\n    const style = document.createElement('style');\n    style.innerHTML = css;\n    this.player_.el_.appendChild(style);\n  }\n\n  _resizeHandler() {\n\n    const shoppableBarBreakpoints = [\n      ['sm', 0, 80],\n      ['md', 81, 110],\n      ['lg', 111, 170]\n    ];\n\n    const shoppableBarWidth = parseFloat(this.options_.width) / 100.0 * this.player_.el_.clientWidth;\n    let inRange = false;\n    if (shoppableBarWidth) {\n      for (const [name, min, max] of shoppableBarBreakpoints) {\n        if (shoppableBarWidth > min && shoppableBarWidth <= max) {\n          this.layout_.contentWrpEl_.setAttribute('size', name);\n          inRange = name;\n        }\n      }\n      if (!inRange) {\n        this.layout_.contentWrpEl_.removeAttribute('size');\n      }\n    }\n  }\n\n\n  init() {\n    this.render();\n  }\n\n  render() {\n    this.layout_ = new ShoppableBarLayout(this.player_, this.options_);\n  }\n\n}\n\n\nexport default ShoppableWidget;\n","/**\n * Wraps the given function, `fn`, with a new function that only invokes `fn`\n * at most once per every `wait` milliseconds.\n *\n * @function\n * @param    {Function} fn\n *           The function to be throttled.\n *\n * @param    {number}   wait\n *           The number of milliseconds by which to throttle.\n *\n * @return   {Function}\n */\n\nfunction throttle(fn, wait) {\n  let last = window.performance.now();\n\n  const throttled = function(...args) {\n    const now = window.performance.now();\n\n    if (now - last >= wait) {\n      fn(...args);\n      last = now;\n    }\n  };\n\n  return throttled;\n}\n\nexport { throttle };\n","// https://github.com/csnover/js-iso8601/blob/master/iso8601.js\nconst numericKeys = [1, 4, 5, 6, 7, 10, 11];\n\nconst parseISO8601 = function (date) {\n  let timestamp = 0;\n  let struct = 0;\n  let minutesOffset = 0;\n\n  // ES5 §15.9.4.2 states that the string should attempt to be parsed as a Date Time String Format string\n  // before falling back to any implementation-specific date parsing, so that’s what we do, even if native\n  // implementations could be faster\n  //              1 YYYY                2 MM       3 DD           4 HH    5 mm       6 ss        7 msec        8 Z 9 ±    10 tzHH    11 tzmm\n  if ((struct = /^(\\d{4}|[+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2}))?)?(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{2})(?::(\\d{2}))?)?)?$/.exec(date))) {\n    // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\n    for (let i = 0, k; (k = numericKeys[i]); ++i) {\n      struct[k] = +struct[k] || 0;\n    }\n\n    // allow undefined days and months\n    struct[2] = (+struct[2] || 1) - 1;\n    struct[3] = +struct[3] || 1;\n\n    if (struct[8] !== 'Z' && struct[9] !== undefined) {\n      minutesOffset = struct[10] * 60 + struct[11];\n\n      if (struct[9] === '+') {\n        minutesOffset = 0 - minutesOffset;\n      }\n    }\n\n    timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\n  } else {\n    timestamp = NaN;\n  }\n\n  return timestamp;\n};\n\n// Convert time string i.e. '2:40' to seconds number (160)\n// Also allows h:m:s format and mm:ss, m:s etc.\nconst parseTime = function (hms) {\n  const [seconds, minutes, hours] = hms.split(':').reverse();\n  let sum = null;\n  if (!isNaN(seconds)) {\n    sum = (+hours || 0) * 60 * 60 + (+minutes || 0) * 60 + (+seconds);\n  }\n  return sum;\n};\n\nexport { parseISO8601, parseTime };\n"],"names":["elMatches","el","selector","p","Element","prototype","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","s","indexOf","call","document","querySelectorAll","this","SHOPPABLE_WIDGET_OPTIONS_DEFAULTS","location","toggleIcon","width","startState","autoClose","transformation","quality","fetch_format","crop","products","showPostPlayOverlay","SHOPPABLE_CLICK_ACTIONS","SHOPPABLE_PANEL_VISIBLE_CLASS","SHOPPABLE_PANEL_HIDDEN_CLASS","SHOPPABLE_PRODUCTS_OVERLAY_CLASS","CLD_SPBL_PANEL_CLASS","CLD_SPBL_TOGGLE_CLASS","CLD_SPBL_TOGGLE_ICON_CLASS","CLD_SPBL_INNER_BAR","SHOPPABLE_ANIMATION_CLASS","CLD_SPBL_ITEM","CLD_SPBL_IMAGE","dom","videojs","Component","ShoppableProductsOverlay","constructor","player","options","arguments","length","undefined","super","options_","player_","on","PLAYER_EVENT","SHOW_PRODUCTS_OVERLAY","renderProducts","dispose","layout_","removeClass","addClass","innerHTML","currentTime","filter","product","hotspots","some","a","parseTime","time","forEach","hotspot","find","hs","productName","createEl","className","productTooltip","tooltipPosition","productHotSpot","href","clickUrl","target","style","x","y","appendChild","one","SEEKING","clearLayout","PLAY","dimensions","currentDimensions","height","ClickableComponent","ShoppablePanelToggle","handleClick","event","preventDefault","stopPropagation","clickHandler","iconProps","iconAttrs","icon","PRODUCT_BAR_MIN","setTimeout","classList","add","remove","ShoppableBarLayout","contentWrpEl_","contentBannerEl_","bannerMsg","productsOverlay","el_","contentEl_","addChild","togglePanel","removeLayout","open","toggleClass","eventName","hasClass","trigger","addEventListener","once","widthTransformation","ShoppablePanelItem","initOptions","isDragged","getTitle","conf","title","setAttribute","productId","onHover","addOnHover","item","cloudinaryConfig","onClick","addOnClick","img","src","url","info","cldConf","action","overlayText","args","overlay","switchImgSource","ImageSource","publicId","hoverImg","pause","ShoppablePanel","itemChangeHandler","render","SHOPPABLE_ITEM_CHANGED","off","map","cls","removeAll","childrens","children","i","removeChild","getItems","cloudinary","assign","startTime","endTime","imageSrc","scrollToActiveItem","activeItems","getElementsByClassName","toScroll","offsetTop","documentElement","scrollTo","top","behavior","scrollTop","items","throttledScrollToActiveItem","throttle","index","shoppablePanelItem","next","current","e","currentTarget","evName","ended","dataset","clickAction","window","gotoUrl","gotoSecs","seek","postModal","close","play","TIME_UPDATE","contains","postPlay","handleDragToScroll","slider","querySelector","isDown","startX","scrollLeft","pageX","offsetLeft","walk","Math","abs","panel","bgSrc","currentPoster","toOptions","effect","panelBg","replayBtn","onclick","createModal","name","uncloseable","merge","ENDED","ShoppablePostWidget","_injectCSS","_setListeners","resizeHandler","_resizeHandler","bind","RESIZE","removeEventListener","css","createElement","shoppableBarBreakpoints","shoppableBarWidth","parseFloat","clientWidth","inRange","min","max","removeAttribute","init","fn","wait","last","performance","now","numericKeys","parseISO8601","date","timestamp","struct","minutesOffset","exec","k","Date","UTC","NaN","hms","seconds","minutes","hours","split","reverse","sum","isNaN"],"sourceRoot":""}