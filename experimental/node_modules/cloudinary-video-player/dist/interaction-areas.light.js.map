{"version":3,"file":"interaction-areas.light.js","mappings":"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","sources":["webpack://cloudinary-video-player/./components/themeButton/themedButton.const.js","webpack://cloudinary-video-player/./components/themeButton/themedButton.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.service.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.utils.js","webpack://cloudinary-video-player/./utils/throttle.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.scss?aee4"],"sourcesContent":["export const BUTTON_THEME = {\n  TRANSPARENT_WHITE: 'transparent-white'\n};\n","import { elementsCreator } from '../../utils/dom';\n\n\nexport const themedButton = ({ text, onClick, theme = '', loadingDelay = 0 }) => {\n  return elementsCreator({\n    tag: 'button',\n    attr: { class: `vp-theme-button theme-${theme}` },\n    onClick,\n    children: [\n      {\n        tag: 'div',\n        attr: { class: 'vp-loading-bar' },\n        style: {\n          'animation-duration': `${loadingDelay}ms`\n        }\n      },\n      {\n        tag: 'div',\n        attr: { class: 'content' },\n        children: text\n      }\n    ]\n  });\n};\n\n","import videojs from 'video.js';\nimport {\n  CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n  DEFAULT_INTERACTION_ARE_TRANSITION,\n  INTERACTION_AREAS_CONTAINER_CLASS_NAME, TEMPLATE_INTERACTION_AREAS_VTT\n} from './interaction-areas.const';\nimport {\n  createInteractionAreaLayoutMessage,\n  getInteractionAreaItem,\n  getZoomTransformation,\n  removeInteractionAreasContainer,\n  setInteractionAreasContainer,\n  setInteractionAreasContainerSize,\n  shouldShowAreaLayoutMessage,\n  updateInteractionAreasItem\n} from './interaction-areas.utils';\nimport { addEventListener, createElement } from '../../utils/dom';\nimport { throttle } from '../../utils/throttle';\nimport { get } from '../../utils/object';\nimport { noop } from '../../utils/type-inference';\nimport { addMetadataTrack } from '../../video-player.utils';\nimport { PLAYER_EVENT } from '../../utils/consts';\n\nimport './interaction-areas.scss';\n\nexport const interactionAreasService = (player, playerOptions, videojsOptions) => {\n\n  let isZoomed = false;\n  let currentSource = null;\n  let currentTrack = null;\n  let unZoom = noop;\n\n  const shouldLayoutMessage = () => shouldShowAreaLayoutMessage(videojsOptions.interactionDisplay);\n\n  const getIsSyncOffsetTime = () => {\n    const interactionAreasConfig = getInteractionAreasConfig();\n    return (interactionAreasConfig && interactionAreasConfig.syncOffsetTime !== undefined) ? interactionAreasConfig.syncOffsetTime : false;\n  };\n\n  function isInteractionAreasEnabled(enabled = false) {\n    const interactionAreasConfig = getInteractionAreasConfig();\n    return enabled || (interactionAreasConfig && interactionAreasConfig.enable);\n  }\n\n  function setAreasPositionListener() {\n    currentTrack && player.videojs.removeRemoteTextTrack(currentTrack);\n\n    const isEnabled = isInteractionAreasEnabled();\n    const interactionAreasConfig = getInteractionAreasConfig();\n\n    if (!isEnabled || isZoomed) {\n      return null;\n    }\n\n    if (Array.isArray(interactionAreasConfig.template)) {\n      addInteractionAreasItems(interactionAreasConfig.template);\n      setContainerSize();\n    } else {\n      const vttUrl = interactionAreasConfig.vttUrl || TEMPLATE_INTERACTION_AREAS_VTT[interactionAreasConfig.template];\n\n      if (vttUrl) {\n        currentTrack = addMetadataTrack(player.videojs, vttUrl);\n        addCueListener(currentTrack);\n      }\n    }\n  }\n\n  function setGoBackButton() {\n    const button = createElement('div', { 'class': 'go-back-button' });\n\n    button.addEventListener('click', () => {\n      unZoom();\n    }, false);\n\n    const tracksContainer = createElement('div', { 'class': INTERACTION_AREAS_CONTAINER_CLASS_NAME }, button);\n    setInteractionAreasContainer(player.videojs, tracksContainer);\n  }\n\n  function getInteractionAreasConfig() {\n    const { cldSrc } = currentSource;\n    return cldSrc && cldSrc.getInteractionAreas();\n  }\n\n  function removeLayoutMessage() {\n    removeInteractionAreasContainer(player.videojs);\n    setAreasPositionListener();\n    player.play();\n  }\n\n  function setLayoutMessage() {\n    if (!isInteractionAreasEnabled()) {\n      return;\n    }\n\n    if (shouldLayoutMessage()) {\n      let layoutMessageTimout = null;\n      const showItAgainCheckbox = get(videojsOptions, 'interactionDisplay.layout.showAgain', false);\n      player.pause();\n\n      createInteractionAreaLayoutMessage(player.videojs, () => {\n        clearTimeout(layoutMessageTimout);\n        removeLayoutMessage();\n      }, showItAgainCheckbox);\n\n      if (!showItAgainCheckbox) {\n        layoutMessageTimout = setTimeout(removeLayoutMessage, CLOSE_INTERACTION_AREA_LAYOUT_DELAY);\n      }\n    } else {\n      removeLayoutMessage();\n    }\n  }\n\n  function handleAds() {\n    player.on('adsready', () => {\n      player.videojs.ima.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED, setLayoutMessage);\n    });\n  }\n\n  function init() {\n    currentSource = currentSource || player.videojs.currentSource();\n\n    if (isInteractionAreasEnabled()) {\n\n      player.videojs.el().classList.add('interaction-areas');\n\n      player.videojs.one(PLAYER_EVENT.PLAY, () => {\n        if (typeof player.videojs.ima === 'object') {\n          handleAds();\n        } else {\n          setLayoutMessage();\n        }\n      });\n\n      const setInteractionAreasContainerSize = throttle(setContainerSize, 100);\n\n      player.videojs.on(PLAYER_EVENT.FULL_SCREEN_CHANGE, () => {\n        // waiting for fullscreen will end\n        setTimeout(setInteractionAreasContainerSize, 100);\n      });\n\n      const resizeDestroy = addEventListener(window, 'resize', setContainerSize, false);\n\n      player.videojs.on(PLAYER_EVENT.DISPOSE, resizeDestroy);\n    }\n\n    player.videojs.on(PLAYER_EVENT.ENDED, () => {\n      unZoom();\n    });\n\n    player.videojs.on(PLAYER_EVENT.ERROR, () => {\n      player.pause();\n    });\n  }\n\n  function onZoom(src, newOption, item) {\n    const originalCurrentTime = player.currentTime();\n    const isSyncOffsetTime = getIsSyncOffsetTime();\n    const { cldSrc } = currentSource;\n    const currentSrcOptions = cldSrc.getInitOptions();\n    const option = newOption || { transformation: currentSrcOptions.transformation };\n    const transformation = !src && getZoomTransformation(player.videoElement, item);\n    const sourceOptions = transformation ? videojs.obj.merge({ transformation }, option) : option;\n\n    const newSource = cldSrc.isRawUrl ? currentSource.src : { publicId: cldSrc.publicId() };\n    player.source(transformation ? { publicId: cldSrc.publicId() } : src, sourceOptions).play();\n    isSyncOffsetTime && player.currentTime(originalCurrentTime);\n\n    isZoomed = true;\n\n    setGoBackButton();\n\n    unZoom = () => {\n      if (isZoomed) {\n        isZoomed = false;\n        const currentZoomedTime = player.currentTime();\n        const duration = player.duration();\n        player.source(newSource, currentSrcOptions).play();\n        isSyncOffsetTime && currentZoomedTime < duration && player.currentTime(currentZoomedTime);\n        setAreasPositionListener();\n      }\n    };\n  }\n\n  function onInteractionAreasClick({ event, item, index }) {\n    const interactionAreasConfig = getInteractionAreasConfig();\n\n    interactionAreasConfig.onClick && interactionAreasConfig.onClick({\n      item,\n      index,\n      event,\n      zoom: (source, option) => {\n        onZoom(source, option, item);\n      }\n    });\n  }\n\n  function addInteractionAreasItems(interactionAreasData, previousInteractionAreasData, durationTime = 0) {\n    const configs = { playerOptions: playerOptions, videojsOptions: videojsOptions };\n\n    if (previousInteractionAreasData) {\n      updateInteractionAreasItem(player.videojs, configs, interactionAreasData, previousInteractionAreasData, durationTime, onInteractionAreasClick);\n    } else {\n      const interactionAreasItems = interactionAreasData.map((item, index) => {\n        return getInteractionAreaItem(configs, item, index, durationTime, (event) => {\n          onInteractionAreasClick({ event, item, index });\n        });\n      });\n\n      setInteractionAreasContainer(player.videojs, createElement('div', { 'class': INTERACTION_AREAS_CONTAINER_CLASS_NAME }, interactionAreasItems));\n    }\n  }\n\n  function setContainerSize() {\n    if (isInteractionAreasEnabled()) {\n      setInteractionAreasContainerSize(player.videojs, player.videoElement);\n    }\n  }\n\n  function addCueListener(track) {\n    if (!track) {\n      return;\n    }\n\n    let previousTracksData = null;\n\n    track.addEventListener('cuechange', () => {\n      const activeCue = track.activeCues && track.activeCues[0];\n\n      if (activeCue) {\n        const durationTime = Math.max(Math.floor((activeCue.endTime - activeCue.startTime) * 1000), DEFAULT_INTERACTION_ARE_TRANSITION);\n\n        const tracksData = JSON.parse(activeCue.text);\n\n        addInteractionAreasItems(tracksData, previousTracksData, durationTime);\n        !previousTracksData && setContainerSize();\n        previousTracksData = tracksData;\n      } else {\n        removeInteractionAreasContainer(player.videojs);\n        previousTracksData = null;\n      }\n    });\n  }\n\n  init();\n};\n","import { elementsCreator, styleElement } from '../../utils/dom';\nimport { get } from '../../utils/object';\nimport {\n  CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n  INTERACTION_AREA_HAND_ICON,\n  INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME,\n  INTERACTION_AREAS_CONTAINER_CLASS_NAME,\n  INTERACTION_AREAS_PREFIX,\n  INTERACTION_AREAS_THEME\n} from './interaction-areas.const';\nimport { noop } from '../../utils/type-inference';\nimport { getDefaultPlayerColor } from '../colors';\nimport { forEach, some } from '../../utils/array';\nimport { themedButton } from '../../components/themeButton/themedButton';\nimport { BUTTON_THEME } from '../../components/themeButton/themedButton.const';\n\n\nconst getInteractionAreaItemId = (item, index) => item.id || item.type || `id_${index}`;\n\nexport const getInteractionAreaItem = ({ playerOptions, videojsOptions }, item, index, durationTime, onClick) => {\n  const defaultColor = getDefaultPlayerColor(videojsOptions);\n  const accentColor = playerOptions && playerOptions.colors ? playerOptions.colors.accent : defaultColor.accent;\n\n  // theme = 'pulsing' / 'shadowed'\n  const theme = get(videojsOptions, 'interactionDisplay.theme.template', INTERACTION_AREAS_THEME.PULSING);\n\n  return elementsCreator({\n    tag: 'div',\n    attr: { class: `${INTERACTION_AREAS_PREFIX}-item theme-${theme}`, 'data-id': getInteractionAreaItemId(item, index) },\n    style: {\n      left: `${item.left}%`,\n      top: `${item.top}%`,\n      width: `${item.width}%`,\n      height: `${item.height}%`,\n      transitionDuration: `${durationTime}ms`\n    },\n    event: {\n      name: 'click',\n      callback: onClick\n    },\n    children: [\n      {\n        tag: 'div',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-area-marker` },\n        children: [\n          {\n            tag: 'div',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-marker-shadow` },\n            style: { [theme === INTERACTION_AREAS_THEME.SHADOWED ? 'backgroundColor' : 'borderColor']: accentColor }\n          },\n          {\n            tag: 'div',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-marker-main` },\n            style: { borderColor: accentColor }\n          }\n        ]\n      }\n    ]\n  });\n};\n\n\nexport const percentageToFixedValue = (outOf, value) => (outOf / (100 / +value));\n\nexport const getZoomTransformation = (videoElement, interactionAreaItem) => {\n\n  const { videoHeight, videoWidth } = videoElement;\n\n  const itemX = percentageToFixedValue(videoWidth, interactionAreaItem.left);\n  const itemY = percentageToFixedValue(videoHeight, interactionAreaItem.top);\n  const itemWidth = percentageToFixedValue(videoWidth, interactionAreaItem.width);\n  const itemHeight = percentageToFixedValue(videoHeight, interactionAreaItem.height);\n\n  const videoAspectRatio = videoWidth / videoHeight;\n  const itemAspectRatio = itemWidth / itemHeight;\n\n  const width = Math.round(itemAspectRatio > 1 || videoAspectRatio > 1 ? itemHeight * itemAspectRatio : itemWidth);\n  const height = Math.round(width / videoAspectRatio);\n\n  const x = Math.round(itemX - (width - itemWidth) / 2);\n  const y = Math.round(itemY - (height - itemHeight) / 2);\n\n  return {\n    width,\n    height,\n    x: Math.min(Math.max(x, 0), videoWidth - width),\n    y: Math.min(Math.max(y, 0), videoHeight - height),\n    crop: 'crop'\n  };\n};\n\n\nexport const setInteractionAreasContainer = (videojs, newInteractionAreasContainer) => {\n  const currentInteractionAreasContainer = getInteractionAreasContainer(videojs);\n\n  if (currentInteractionAreasContainer) {\n    currentInteractionAreasContainer.replaceWith(newInteractionAreasContainer);\n  } else {\n    // do not use element.append for ie11 support\n    videojs.el().appendChild(newInteractionAreasContainer);\n  }\n};\n\nconst getInteractionAreaElementById = (interactionAreasContainer, item, index) => interactionAreasContainer.querySelector(`[data-id=${getInteractionAreaItemId(item, index)}]`);\n\n\nexport const updateInteractionAreasItem = (videojs, configs, interactionAreasData, previousInteractionAreasData, durationTime, onClick) => {\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  forEach(interactionAreasData, (item, index) => {\n    const itemElement = getInteractionAreaElementById(interactionAreasContainer, item, index);\n    const itemId = getInteractionAreaItemId(item);\n    const isExistItem = some(previousInteractionAreasData, i => getInteractionAreaItemId(i) === itemId);\n\n    // in case the element of the item is in the dom and exist in the previous data , it update the element position\n    if (isExistItem && itemElement) {\n      styleElement(itemElement, {\n        left: `${item.left}%`,\n        top: `${item.top}%`,\n        width: `${item.width}%`,\n        height: `${item.height}%`,\n        transitionDuration: `${durationTime}ms`\n      });\n      // if the element did not exist before , not in the dom and not in the previous data , it add a new element\n    } else if (!isExistItem && !itemElement) {\n      // do not use element.append for ie11 support\n      interactionAreasContainer.appendChild(getInteractionAreaItem(configs, item, index, durationTime, (event) => {\n        onClick({ event, item, index });\n      }));\n    }\n  });\n\n  // checking the previous data for element that should be removed if not exist in the new data object.\n  forEach(previousInteractionAreasData, (item, index) => {\n    const itemElement = getInteractionAreaElementById(interactionAreasContainer, item, index);\n    const itemId = getInteractionAreaItemId(item);\n    const shouldBeRemoved = !some(interactionAreasData, i => getInteractionAreaItemId(i) === itemId);\n\n    if (itemElement && shouldBeRemoved) {\n      // do not use element.remove for ie11 support\n      itemElement.parentNode.removeChild(itemElement);\n    }\n  });\n\n};\n\nexport const shouldShowAreaLayoutMessage = (interactionAreasConfig) => {\n  const isLayoutEnabled = get(interactionAreasConfig, 'layout.enable', true);\n\n  return isLayoutEnabled && localStorage.getItem(INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME) !== 'true';\n};\n\n\nconst onClickInteractionAreaLayoutClick = (checked, onClick = noop) => {\n  localStorage.setItem(INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME, JSON.parse(checked));\n  onClick();\n};\n\nexport const createInteractionAreaLayoutMessage = (videojs, onClick, showItAgainCheckbox = false) => {\n\n  let checked = false;\n\n  const id = `checkbox_${Math.round(Math.random() * 10000)}`;\n\n  const tracksContainer = elementsCreator({\n    tag: 'div',\n    attr: { class: `${INTERACTION_AREAS_CONTAINER_CLASS_NAME} ${INTERACTION_AREAS_PREFIX}-layout-message ${showItAgainCheckbox ? '' : 'clickable'}` },\n    onClick: !showItAgainCheckbox ? () => onClickInteractionAreaLayoutClick(checked, onClick) : null,\n    children: [\n      {\n        tag: 'img',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-icon`, src: INTERACTION_AREA_HAND_ICON }\n      },\n      {\n        tag: 'h3',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-title` },\n        children: 'Tap on dots to zoom for a product.'\n      },\n      themedButton({\n        text: 'Got it',\n        theme: BUTTON_THEME.TRANSPARENT_WHITE,\n        loadingDelay: showItAgainCheckbox ? 0 : CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n        onClick: showItAgainCheckbox ? () => onClickInteractionAreaLayoutClick(checked, onClick) : null\n      }),\n      showItAgainCheckbox && {\n        tag: 'div',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-do-not-show` },\n        children: [\n          {\n            tag: 'input',\n            attr: { type: 'checkbox', class: `${INTERACTION_AREAS_PREFIX}-layout-message-checkbox`, id },\n            event: {\n              name: 'input',\n              callback: (event) => {\n                checked = event.target.checked;\n              }\n            }\n          },\n          {\n            tag: 'label',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-checkbox-title`, for: id },\n            children: 'Don׳t show it again'\n          }\n        ]\n      }\n    ].filter(i => i)\n  });\n\n  setInteractionAreasContainer(videojs, tracksContainer);\n};\n\nconst getInteractionAreasContainer = (videojs) => videojs.el().querySelector(`.${INTERACTION_AREAS_CONTAINER_CLASS_NAME}`);\n\nexport const removeInteractionAreasContainer = (videojs) => {\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  // do not use element.remove for ie11 support\n  interactionAreasContainer && interactionAreasContainer.parentNode.removeChild(interactionAreasContainer);\n};\n\nexport const setInteractionAreasContainerSize = (videojs, videoElement) => {\n\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  if (!interactionAreasContainer) {\n    return;\n  }\n\n  const { videoHeight, videoWidth } = videoElement;\n  const videoAspectRatio = videoWidth / videoHeight;\n\n  const width = videoAspectRatio * videoElement.clientHeight;\n\n  interactionAreasContainer.style.width = `${videoElement.clientWidth < width ? '100%' : width}px`;\n  interactionAreasContainer.style.height = videoElement.clientWidth < width ? `${videoElement.clientWidth / videoAspectRatio}px` : '100%';\n};\n","/**\n * Wraps the given function, `fn`, with a new function that only invokes `fn`\n * at most once per every `wait` milliseconds.\n *\n * @function\n * @param    {Function} fn\n *           The function to be throttled.\n *\n * @param    {number}   wait\n *           The number of milliseconds by which to throttle.\n *\n * @return   {Function}\n */\n\nfunction throttle(fn, wait) {\n  let last = window.performance.now();\n\n  const throttled = function(...args) {\n    const now = window.performance.now();\n\n    if (now - last >= wait) {\n      fn(...args);\n      last = now;\n    }\n  };\n\n  return throttled;\n}\n\nexport { throttle };\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["BUTTON_THEME","TRANSPARENT_WHITE","elementsCreator","themedButton","_ref","text","onClick","theme","loadingDelay","tag","attr","class","children","style","videojs","CLOSE_INTERACTION_AREA_LAYOUT_DELAY","DEFAULT_INTERACTION_ARE_TRANSITION","INTERACTION_AREAS_CONTAINER_CLASS_NAME","TEMPLATE_INTERACTION_AREAS_VTT","createInteractionAreaLayoutMessage","getInteractionAreaItem","getZoomTransformation","removeInteractionAreasContainer","setInteractionAreasContainer","setInteractionAreasContainerSize","shouldShowAreaLayoutMessage","updateInteractionAreasItem","addEventListener","createElement","throttle","get","noop","addMetadataTrack","PLAYER_EVENT","interactionAreasService","player","playerOptions","videojsOptions","isZoomed","currentSource","currentTrack","unZoom","shouldLayoutMessage","interactionDisplay","getIsSyncOffsetTime","interactionAreasConfig","getInteractionAreasConfig","syncOffsetTime","undefined","isInteractionAreasEnabled","enabled","arguments","length","enable","setAreasPositionListener","removeRemoteTextTrack","isEnabled","Array","isArray","template","addInteractionAreasItems","setContainerSize","vttUrl","addCueListener","setGoBackButton","button","tracksContainer","cldSrc","getInteractionAreas","removeLayoutMessage","play","setLayoutMessage","layoutMessageTimout","showItAgainCheckbox","pause","clearTimeout","setTimeout","handleAds","on","ima","window","google","AdEvent","Type","ALL_ADS_COMPLETED","init","el","classList","add","one","PLAY","FULL_SCREEN_CHANGE","resizeDestroy","DISPOSE","ENDED","ERROR","onZoom","src","newOption","item","originalCurrentTime","currentTime","isSyncOffsetTime","currentSrcOptions","getInitOptions","option","transformation","videoElement","sourceOptions","obj","merge","newSource","isRawUrl","publicId","source","currentZoomedTime","duration","onInteractionAreasClick","event","index","zoom","interactionAreasData","previousInteractionAreasData","durationTime","configs","interactionAreasItems","map","track","previousTracksData","activeCue","activeCues","Math","max","floor","endTime","startTime","tracksData","JSON","parse","styleElement","INTERACTION_AREA_HAND_ICON","INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME","INTERACTION_AREAS_PREFIX","INTERACTION_AREAS_THEME","getDefaultPlayerColor","forEach","some","getInteractionAreaItemId","id","type","defaultColor","accentColor","colors","accent","PULSING","left","top","width","height","transitionDuration","name","callback","SHADOWED","borderColor","percentageToFixedValue","outOf","value","interactionAreaItem","videoHeight","videoWidth","itemX","itemY","itemWidth","itemHeight","videoAspectRatio","itemAspectRatio","round","x","y","min","crop","newInteractionAreasContainer","currentInteractionAreasContainer","getInteractionAreasContainer","replaceWith","appendChild","getInteractionAreaElementById","interactionAreasContainer","querySelector","itemElement","itemId","isExistItem","i","shouldBeRemoved","parentNode","removeChild","isLayoutEnabled","localStorage","getItem","onClickInteractionAreaLayoutClick","checked","setItem","random","target","for","filter","clientHeight","clientWidth","fn","wait","last","performance","now","throttled"],"sourceRoot":""}