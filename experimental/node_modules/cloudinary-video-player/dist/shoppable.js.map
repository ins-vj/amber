{"version":3,"file":"shoppable.js","mappings":"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","sources":["webpack://cloudinary-video-player/./components/shoppable-bar/layout/bar-layout.js","webpack://cloudinary-video-player/./components/shoppable-bar/layout/shoppable-panel-toggle.js","webpack://cloudinary-video-player/./components/shoppable-bar/layout/shoppable-products-overlay.js","webpack://cloudinary-video-player/./components/shoppable-bar/panel/shoppable-panel-item.js","webpack://cloudinary-video-player/./components/shoppable-bar/panel/shoppable-panel.js","webpack://cloudinary-video-player/./components/shoppable-bar/shoppable-post-widget.js","webpack://cloudinary-video-player/./components/shoppable-bar/shoppable-widget.const.js","webpack://cloudinary-video-player/./components/shoppable-bar/shoppable-widget.js","webpack://cloudinary-video-player/./utils/matches.js","webpack://cloudinary-video-player/./utils/throttle.js","webpack://cloudinary-video-player/./utils/time.js","webpack://cloudinary-video-player/./components/shoppable-bar/shoppable-widget.scss?6e49"],"sourcesContent":["\nimport videojs from 'video.js';\nimport { elMatches } from 'utils/matches';\n\nconst dom = videojs.dom || videojs;\nconst Component = videojs.getComponent('Component');\nimport ShoppableProductsOverlay from './shoppable-products-overlay';\nimport ShoppablePanelToggle from './shoppable-panel-toggle';\nimport {\n  CLD_SPBL_INNER_BAR,\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nclass ShoppableBarLayout extends Component {\n  constructor(player, options) {\n    super(player, options);\n    this.player_ = player;\n\n    this.player().addClass('cld-shoppable-panel');\n    this.player().addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n\n    this.contentWrpEl_ = dom.createEl('div', { className: 'cld-spbl-bar' });\n\n    this.contentBannerEl_ = dom.createEl('div', { className: 'cld-spbl-banner-msg base-color-text' }, {}, this.options_.bannerMsg || 'Shop the Video');\n    this.contentWrpEl_.appendChild(this.contentBannerEl_);\n\n    const productsOverlay = new ShoppableProductsOverlay(this.player_, this.options_);\n    this.contentWrpEl_.appendChild(productsOverlay.el_);\n\n    this.contentEl_ = dom.createEl('div', { className: CLD_SPBL_INNER_BAR });\n    this.contentWrpEl_.appendChild(this.contentEl_);\n\n    this.player().el().appendChild(this.contentWrpEl_);\n\n    this.addChild(new ShoppablePanelToggle(this.player_, {\n      toggleIcon: this.options_.toggleIcon,\n      clickHandler: () => {\n        this.togglePanel();\n      }\n    }));\n\n    this.addChild('ShoppablePanel', this.options_);\n\n    this.dispose = () => {\n      this.removeLayout();\n      super.dispose();\n    };\n\n    this.togglePanel = (open) => {\n      if (open === true) {\n        // Open\n        this.player().removeClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n        this.player().addClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n      } else if (open === false) {\n        // Close\n        this.player().removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n        this.player().addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n      } else {\n        // Toggle\n        this.player().toggleClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n        this.player().toggleClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n      }\n      let eventName = this.player().hasClass(SHOPPABLE_PANEL_VISIBLE_CLASS) ? 'productBarMax' : 'productBarMin';\n      this.player().trigger(eventName);\n    };\n\n    // Open shoppable\n    if (this.options_.startState === 'open') {\n      this.togglePanel(true);\n    }\n\n    // On play start\n    this.player_.on(PLAYER_EVENT.PLAY, () => {\n      if (this.player_.currentTime() < 0.01) {\n\n        // Open shoppable on-play\n        if (this.options_.startState === 'openOnPlay') {\n          this.togglePanel(true, this.options_.autoClose);\n        }\n\n        // Auto-close shoppable\n        if (this.options_.autoClose && this.options_.startState.indexOf('open') !== -1) {\n          setTimeout(() => {\n            // Keep it open while hovered\n            if (!elMatches(this.contentEl_, ':hover')) {\n              this.togglePanel(false);\n            } else {\n              this.contentEl_.addEventListener('mouseleave', () => {\n                this.togglePanel(false);\n              }, { once: true });\n            }\n          }, this.options_.autoClose * 1000);\n        }\n\n      }\n\n    });\n  }\n\n  createEl() {\n    const el = super.createEl('div');\n\n    return el;\n  }\n\n}\n\nvideojs.registerComponent('shoppableBarLayout', ShoppableBarLayout);\n\nexport default ShoppableBarLayout;\n","import videojs from 'video.js';\nimport {\n  CLD_SPBL_TOGGLE_CLASS,\n  CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS,\n  CLD_SPBL_TOGGLE_ICON_CLASS,\n  CLOSE_ICON_CLASS,\n  ICON_CART_CLASS,\n  SHOPPABLE_ANIMATION_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\nconst dom = videojs.dom || videojs;\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass ShoppablePanelToggle extends ClickableComponent {\n\n  constructor(player, options) {\n    super(player, options);\n    this.options_ = options;\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.options_.clickHandler();\n  }\n\n  createEl() {\n    let iconProps = {};\n    let iconAttrs = {};\n    if (this.options_.toggleIcon) {\n      iconProps = {\n        className: `${CLD_SPBL_TOGGLE_ICON_CLASS} ${CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS} ${CLOSE_ICON_CLASS}`\n      };\n      iconAttrs = {\n        style: `background-image: url(${this.options_.toggleIcon})`\n      };\n    } else {\n      iconProps = {\n        className: `${CLD_SPBL_TOGGLE_ICON_CLASS} ${ICON_CART_CLASS}`\n      };\n    }\n    const icon = dom.createEl('span', iconProps, iconAttrs);\n\n    const el = super.createEl('a', {\n      className: `${CLD_SPBL_TOGGLE_CLASS} base-color-bg`\n    });\n    el.appendChild(icon);\n\n    this.player_.on(PLAYER_EVENT.PRODUCT_BAR_MIN, () => {\n      setTimeout(() => {\n        icon.classList.add(SHOPPABLE_ANIMATION_CLASS);\n        setTimeout(() => {\n          icon.classList.remove(SHOPPABLE_ANIMATION_CLASS);\n        }, 1000);\n      }, 500);\n    });\n\n    return el;\n  }\n}\n\nvideojs.registerComponent('shoppablePanelToggle', ShoppablePanelToggle);\n\nexport default ShoppablePanelToggle;\n","import videojs from 'video.js';\nconst dom = videojs.dom || videojs;\nimport { parseTime } from 'utils/time';\nimport { find } from 'utils/find';\nimport {\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_PRODUCTS_OVERLAY_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nconst Component = videojs.getComponent('Component');\n\nclass ShoppableProductsOverlay extends Component {\n\n  constructor(player, options = {}) {\n    super(player, options);\n    this.options_ = options;\n    this.player_ = player;\n\n    this.player_.on(PLAYER_EVENT.SHOW_PRODUCTS_OVERLAY, this.renderProducts);\n\n    this.dispose = () => {\n      this.layout_.dispose();\n    };\n  }\n\n  renderProducts = () => {\n    // Close products side-panel\n    this.player_.removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n    this.player_.addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n    this.player_.addClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n\n    this.layout_.innerHTML = '';\n\n    // Filter products with appearance on currentTime\n    const currentTime = this.player_.currentTime();\n    const currentProducts = this.options_.products.filter(product => product.hotspots && product.hotspots.some(a => parseTime(a.time) === currentTime));\n\n    currentProducts.forEach(product => {\n      const hotspot = find(product.hotspots, (hs) => parseTime(hs.time) === currentTime);\n\n      const productName = dom.createEl('div',\n        { className: 'cld-spbl-product-hotspot-name' },\n        {},\n        product.productName\n      );\n      const productTooltip = dom.createEl('div',\n        { className: 'cld-spbl-product-tooltip cld-spbl-product-tooltip-' + hotspot.tooltipPosition },\n        {},\n        productName\n      );\n      const productHotSpot = dom.createEl('a',\n        {\n          className: 'cld-spbl-product-hotspot accent-color-text',\n          href: hotspot.clickUrl,\n          target: '_blank'\n        },\n        { style: 'left:' + hotspot.x + '; top:' + hotspot.y + ';' },\n        productTooltip\n      );\n\n      this.layout_.appendChild(productHotSpot);\n    });\n\n    // Remove\n    this.player_.one(PLAYER_EVENT.SEEKING, this.clearLayout);\n    this.player_.one(PLAYER_EVENT.PLAY, this.clearLayout);\n  }\n\n  clearLayout = () => {\n    this.layout_.innerHTML = '';\n    this.player_.removeClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n  }\n\n  createEl() {\n    const dimensions = this.player_.currentDimensions();\n\n    this.layout_ = dom.createEl('div', {\n      className: 'cld-spbl-products-overlay',\n      style: `padding-top: ${dimensions.height / dimensions.width * 100}%;`\n    });\n\n    return this.layout_;\n  }\n\n}\n\nvideojs.registerComponent('ShoppableProductsOverlay', ShoppableProductsOverlay);\n\nexport default ShoppableProductsOverlay;\n","import videojs from 'video.js';\nimport { elMatches } from 'utils/matches';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\nconst dom = videojs.dom || videojs;\nimport ImageSource from '../../../plugins/cloudinary/models/image-source';\nimport {\n  CLD_SPBL_IMAGE,\n  CLD_SPBL_ITEM,\n  SHOPPABLE_CLICK_ACTIONS,\n  SHOPPABLE_HOVER_ACTIONS\n} from '../shoppable-widget.const';\n\nconst widthTransformation = { width: 132 };\n\nclass ShoppablePanelItem extends ClickableComponent {\n\n  constructor(player, initOptions) {\n    super(player, initOptions);\n    this.options_ = initOptions;\n    this.isDragged = false;\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!elMatches(this.el_, `.dragged .${CLD_SPBL_ITEM}`)) {\n      // Prevent click event if dragged\n      this.options_.clickHandler(event);\n    }\n    this.isDragged = false;\n  }\n\n  getTitle() {\n    return this.options_.conf.title;\n  }\n\n  createEl() {\n    const el = super.createEl('a', {\n      className: `${CLD_SPBL_ITEM} base-color-bg accent-color-text`,\n      href: '#'\n    });\n\n    el.setAttribute('data-product-id', this.options_.conf.productId || '');\n    el.setAttribute('data-product-name', this.options_.conf.productName || '');\n\n    if (this.options_.conf.onHover) {\n      addOnHover(el, this.options_.conf.onHover, this.options_.item.cloudinaryConfig());\n    }\n    if (this.options_.conf.onClick) {\n      addOnClick(el, this.options_.conf.onClick);\n    }\n\n    const img = super.createEl('img',\n      { className: CLD_SPBL_IMAGE },\n      { src: this.options_.item.url(widthTransformation) }\n    );\n\n    el.appendChild(img);\n\n    if (this.getTitle()) {\n      const info = dom.createEl('div', { className: 'cld-spbl-item-info base-color-semi-bg text-color-text' });\n      const title = dom.createEl('span', { className: 'cld-spbl-item-title' }, {}, this.getTitle());\n      info.appendChild(title);\n      el.appendChild(info);\n    }\n\n    return el;\n  }\n}\n\nconst addOnHover = (el, conf, cldConf) => {\n  el.setAttribute('data-hover-action', conf.action);\n  if (conf.action === SHOPPABLE_HOVER_ACTIONS.OVERLAY) {\n    const overlayText = dom.createEl('span', { className: 'cld-spbl-overlay-text base-color-text' }, {}, conf.args);\n    const overlay = dom.createEl('span', { className: 'cld-spbl-overlay text-color-semi-bg base-color-text' }, { title: conf.args }, overlayText);\n    el.appendChild(overlay);\n  } else {\n\n    const switchImgSource = new ImageSource(conf.args.publicId, {\n      cloudinaryConfig: cldConf,\n      transformation: conf.args.transformation\n    });\n\n    const hoverImg = dom.createEl('img',\n      { className: `${CLD_SPBL_IMAGE} cld-spbl-hover-img` },\n      { src: switchImgSource.url(widthTransformation) }\n    );\n\n    el.appendChild(hoverImg);\n  }\n};\n\nconst addOnClick = (el, conf) => {\n  el.setAttribute('data-click-action', conf.action);\n  el.setAttribute('data-pause', conf.pause);\n  if (conf.action === SHOPPABLE_CLICK_ACTIONS.SEEk) {\n    el.setAttribute('data-seek', conf.args.time);\n  } else if (conf.action === SHOPPABLE_CLICK_ACTIONS.GO_TO) {\n    el.setAttribute('data-goto-url', conf.args.url);\n  }\n};\n\nvideojs.registerComponent('shoppablePanelItem', ShoppablePanelItem);\n\nexport default ShoppablePanelItem;\n","import videojs from 'video.js';\nimport { assign } from 'utils/assign';\nimport { throttle } from 'utils/throttle';\nimport { parseTime } from 'utils/time';\nimport ShoppablePanelItem from './shoppable-panel-item';\nimport ImageSource from '../../../plugins/cloudinary/models/image-source';\nimport {\n  CLD_SPBL_PANEL_CLASS,\n  SHOPPABLE_CLICK_ACTIONS,\n  SHOPPABLE_PANEL_HIDDEN_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_PRODUCTS_OVERLAY_CLASS\n} from '../shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../../utils/consts';\n\nconst Component = videojs.getComponent('Component');\n\nclass ShoppablePanel extends Component {\n\n  constructor(player, options = {}) {\n    super(player, options);\n    this.options = options;\n\n    const itemChangeHandler = () => {\n      this.render();\n    };\n\n    player.on(PLAYER_EVENT.SHOPPABLE_ITEM_CHANGED, itemChangeHandler);\n\n    this.render();\n\n    this.dispose = () => {\n      super.dispose();\n      player.off(PLAYER_EVENT.SHOPPABLE_ITEM_CHANGED, itemChangeHandler);\n    };\n  }\n\n  createEl() {\n    const el = super.createEl();\n    [CLD_SPBL_PANEL_CLASS, 'base-color-bg'].map(cls => el.classList.add(cls));\n    return el;\n  }\n\n  removeAll() {\n    const childrens = this.children();\n    for (let i = childrens.length - 1; i >= 0; --i) {\n      this.removeChild(childrens[i]);\n    }\n  }\n\n  getItems() {\n    const cloudinaryConfig = this.player_.cloudinary.cloudinaryConfig();\n    return this.options.products.map(product => {\n      if (product.onHover && typeof product.onHover.args === 'object') {\n        product.onHover.args.transformation = assign({},\n          this.options.transformation,\n          product.onHover.args.transformation\n        );\n      }\n      const conf = {\n        productId: product.productId,\n        productName: product.productName,\n        title: product.title,\n        onHover: product.onHover,\n        onClick: product.onClick,\n        startTime: product.startTime,\n        endTime: product.endTime\n      };\n      const imageSource = new ImageSource(product.publicId, {\n        cloudinaryConfig: cloudinaryConfig,\n        transformation: assign({}, this.options.transformation, product.transformation)\n      });\n      return {\n        imageSrc: imageSource,\n        conf: conf\n      };\n    });\n  }\n\n  scrollToActiveItem() {\n    const activeItems = this.el_.getElementsByClassName('active');\n    if (activeItems.length > 0) {\n      const toScroll = activeItems[0].offsetTop - 12;\n      // Test for native scrollTo support (IE will fail)\n      if ('scrollBehavior' in document.documentElement.style) {\n        this.el_.scrollTo({\n          top: toScroll,\n          behavior: 'smooth'\n        });\n      } else {\n        this.el_.scrollTop = toScroll;\n      }\n    }\n  }\n\n  render() {\n    this.removeAll();\n\n    const items = this.getItems();\n\n    const throttledScrollToActiveItem = throttle(() => this.scrollToActiveItem(), 1000);\n\n    items.forEach((item, index) => {\n      const shoppablePanelItem = new ShoppablePanelItem(this.player(), {\n        item: item.imageSrc,\n        conf: item.conf,\n        next: index === 1,\n        current: index === 0,\n        clickHandler: (e) => {\n          let target = e.currentTarget || e.target;\n          let evName = this.player_.ended() ? 'productClickPost' : 'productClick';\n          this.player_.trigger(evName, { productId: target.dataset.productId, productName: target.dataset.productName });\n\n          // Go to URL, or seek video (set currentTime)\n          if (target.dataset.clickAction === SHOPPABLE_CLICK_ACTIONS.GO_TO) {\n            window.open(target.dataset.gotoUrl, '_blank');\n          } else if (target.dataset.clickAction === SHOPPABLE_CLICK_ACTIONS.SEEk) {\n            const gotoSecs = parseTime(target.dataset.seek);\n            if (gotoSecs !== null) {\n              this.player_.addClass('vjs-has-started'); // Hide the poster image\n              if (this.player_.postModal) {\n                this.player_.postModal.close();\n              }\n              this.player_.currentTime(gotoSecs);\n              // Close products side-panel\n              this.player_.removeClass(SHOPPABLE_PANEL_VISIBLE_CLASS);\n              this.player_.addClass(SHOPPABLE_PANEL_HIDDEN_CLASS);\n              this.player_.addClass(SHOPPABLE_PRODUCTS_OVERLAY_CLASS);\n              // Wait for the time update and show the tooltips\n              this.player_.one('seeked', () => this.player_.trigger('showProductsOverlay'));\n            }\n          }\n\n          // pause - true (default), false, or number of seconds\n          if (target.dataset.pause !== 'false') {\n            this.player_.pause();\n            if (parseTime(target.dataset.pause)) {\n              setTimeout(() => {\n                this.player_.play();\n              }, parseTime(target.dataset.pause) * 1000);\n            }\n          }\n        }\n      });\n\n      shoppablePanelItem.on('mouseover', e => {\n        let target = e.currentTarget || e.target;\n        let evName = this.player_.ended() ? 'productHoverPost' : 'productHover';\n        this.player_.trigger(evName, { productId: target.dataset.productId, productName: target.dataset.productName });\n      });\n\n      if (typeof item.conf.startTime !== 'undefined' && typeof item.conf.endTime !== 'undefined') {\n        this.player_.on(PLAYER_EVENT.TIME_UPDATE, () => {\n          const time = this.player_.currentTime();\n          if (time >= item.conf.startTime && time < item.conf.endTime) {\n            shoppablePanelItem.el_.classList.add('active');\n            throttledScrollToActiveItem();\n          } else if (shoppablePanelItem.el_.classList.contains('active')) {\n            shoppablePanelItem.el_.classList.remove('active');\n          }\n        });\n      }\n\n      this.addChild(shoppablePanelItem);\n\n    });\n\n  }\n}\n\nvideojs.registerComponent('shoppablePanel', ShoppablePanel);\n\nexport default ShoppablePanel;\n","import videojs from 'video.js';\nimport ShoppablePanel from './panel/shoppable-panel.js';\nimport { CLD_SPBL_PANEL_CLASS } from './shoppable-widget.const';\nconst dom = videojs.dom || videojs;\n\nclass ShoppablePostWidget {\n  constructor(player, options = {}) {\n    this.options_ = { ...options, postPlay: true };\n    this.player_ = player;\n    this.render();\n\n    // Handle drag-to-scroll\n    this.handleDragToScroll();\n\n    this.dispose = () => {\n      this.layout_.dispose();\n    };\n  }\n\n  handleDragToScroll() {\n    const postModal = this.player_.postModal.el_;\n    const slider = postModal.querySelector(`.${CLD_SPBL_PANEL_CLASS}`);\n\n    let isDown = false;\n    let startX = 0;\n    let scrollLeft = 0;\n\n    slider.addEventListener('mousedown', (e) => {\n      isDown = true;\n      startX = e.pageX - slider.offsetLeft;\n      scrollLeft = slider.scrollLeft;\n    });\n\n    document.addEventListener('mouseup', (e) => {\n      isDown = false;\n      setTimeout(() => {\n        slider.classList.remove('dragged');\n      }, 300);\n\n      const x = e.pageX - slider.offsetLeft;\n      const walk = x - startX;\n      if (Math.abs(walk) > 5) {\n        e.preventDefault();\n      }\n    });\n\n    document.addEventListener('mousemove', (e) => {\n      if (!isDown) {\n        return;\n      }\n      e.preventDefault();\n      const x = e.pageX - slider.offsetLeft;\n      const walk = (x - startX);\n      slider.scrollLeft = scrollLeft - walk;\n      if (Math.abs(walk) > 5 && !slider.classList.contains('dragged')) {\n        slider.classList.add('dragged');\n      }\n    });\n  }\n\n  render() {\n\n    this.player_.postModal = null;\n\n    const el = dom.createEl('div', { className: 'cld-spbl-post-play' });\n    const panel = new ShoppablePanel(this.player_, this.options_);\n\n    const title = dom.createEl('div', { className: 'cld-spbl-post-title base-color-text' }, {}, this.options_.bannerMsg || 'Shop the Video');\n\n    // Background - poster + blur effect\n    const bgSrc = this.player_.cloudinary.currentPoster();\n\n    bgSrc.transformation([\n      bgSrc.transformation().toOptions ? bgSrc.transformation().toOptions() : {},\n      { effect: 'blur:3000' }\n    ]);\n\n    const panelBg = dom.createEl('div', {\n      className: 'cld-spbl-post-play-bg',\n      style: `background-image: url(\"${bgSrc.url()}\")`\n    });\n\n    const replayBtn = dom.createEl('button',\n      {\n        className: 'cld-spbl-replay-btn base-color-bg vjs-icon-replay',\n        onclick: () => {\n          this.player_.trigger('replay');\n          this.player_.postModal.close();\n          this.player_.play();\n        }\n      },\n      {},\n      'Replay'\n    );\n\n    el.appendChild(panelBg);\n    el.appendChild(title);\n    el.appendChild(panel.el());\n    el.appendChild(replayBtn);\n\n    this.player_.postModal = this.player_.createModal(el, { name: 'postModal', uncloseable: true });\n\n    this.player_.addClass('cld-spbl-post-modal');\n    this.player_.postModal.on('beforemodalclose', () => {\n      this.player_.removeClass('cld-spbl-post-modal');\n    });\n  }\n\n}\n\nexport default ShoppablePostWidget;\n","export const SHOPPABLE_WIDGET_OPTIONS_DEFAULTS = {\n  location: 'right',\n  toggleIcon: '',\n  width: '20%',\n  startState: 'openOnPlay',\n  autoClose: 2,\n  transformation: {\n    quality: 'auto',\n    width: 'auto',\n    fetch_format: 'auto',\n    crop: 'scale'\n  },\n  products: [],\n  showPostPlayOverlay: false\n};\n\nexport const SHOPPABLE_CLICK_ACTIONS = {\n  GO_TO: 'goto',\n  SEEk: 'seek'\n};\n\nexport const SHOPPABLE_HOVER_ACTIONS = {\n  OVERLAY: 'overlay'\n};\n\nexport const SHOPPABLE_PANEL_VISIBLE_CLASS = 'shoppable-panel-visible';\n\nexport const SHOPPABLE_PANEL_HIDDEN_CLASS = 'shoppable-panel-hidden';\n\nexport const SHOPPABLE_PRODUCTS_OVERLAY_CLASS = 'shoppable-products-overlay';\n\nexport const CLD_SPBL_PANEL_CLASS = 'cld-spbl-panel';\n\nexport const CLD_SPBL_TOGGLE_CLASS = 'cld-spbl-toggle';\n\nexport const CLD_SPBL_TOGGLE_ICON_CLASS = 'cld-spbl-toggle-icon';\n\nexport const CLD_SPBL_INNER_BAR = 'cld-spbl-bar-inner';\n\nexport const CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS = 'cld-spbl-toggle-custom-icon';\n\nexport const ICON_CART_CLASS = 'vjs-icon-cart';\n\nexport const CLOSE_ICON_CLASS = 'vjs-icon-close';\n\nexport const SHOPPABLE_ANIMATION_CLASS = 'animate';\n\nexport const CLD_SPBL_ITEM = 'cld-spbl-item';\n\nexport const CLD_SPBL_IMAGE = 'cld-spbl-img';\n","import videojs from 'video.js';\nimport ShoppableBarLayout from './layout/bar-layout';\nimport ShoppablePostWidget from './shoppable-post-widget';\nimport './shoppable-widget.scss';\nimport {\n  CLD_SPBL_INNER_BAR,\n  CLD_SPBL_PANEL_CLASS,\n  CLD_SPBL_TOGGLE_CLASS,\n  SHOPPABLE_PANEL_VISIBLE_CLASS,\n  SHOPPABLE_WIDGET_OPTIONS_DEFAULTS\n} from './shoppable-widget.const';\nimport { PLAYER_EVENT } from '../../utils/consts';\n\n\nclass ShoppableWidget {\n\n  constructor(player, initOptions = {}) {\n    this.options_ = videojs.obj.merge(SHOPPABLE_WIDGET_OPTIONS_DEFAULTS, initOptions);\n    this.player_ = player;\n\n    if (this.options_.showPostPlayOverlay) {\n      this.player_.on(PLAYER_EVENT.ENDED, () => {\n        this.player_.addChild(new ShoppablePostWidget(this.player_, this.options_));\n      });\n    }\n\n\n    const width = this.options_.width;\n\n    this._injectCSS(`\n      .${CLD_SPBL_INNER_BAR} {\n        transform: translateX(${width});\n      }\n      .${SHOPPABLE_PANEL_VISIBLE_CLASS} .vjs-control-bar {\n        width: calc(100% - ${width});\n      }\n      .${CLD_SPBL_TOGGLE_CLASS} {\n        right: ${width};\n      }\n      .${CLD_SPBL_PANEL_CLASS}{\n        width: ${width};\n      }\n    `);\n\n    this._setListeners();\n  }\n\n  _setListeners() {\n    const resizeHandler = this._resizeHandler.bind(this);\n\n    this.player_.on(PLAYER_EVENT.RESIZE, resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n\n    this.dispose = () => {\n      this.player_.off(PLAYER_EVENT.RESIZE, resizeHandler);\n      window.removeEventListener('resize', resizeHandler);\n      this.layout_.dispose();\n    };\n  }\n\n  _injectCSS(css) {\n    const style = document.createElement('style');\n    style.innerHTML = css;\n    this.player_.el_.appendChild(style);\n  }\n\n  _resizeHandler() {\n\n    const shoppableBarBreakpoints = [\n      ['sm', 0, 80],\n      ['md', 81, 110],\n      ['lg', 111, 170]\n    ];\n\n    const shoppableBarWidth = parseFloat(this.options_.width) / 100.0 * this.player_.el_.clientWidth;\n    let inRange = false;\n    if (shoppableBarWidth) {\n      for (const [name, min, max] of shoppableBarBreakpoints) {\n        if (shoppableBarWidth > min && shoppableBarWidth <= max) {\n          this.layout_.contentWrpEl_.setAttribute('size', name);\n          inRange = name;\n        }\n      }\n      if (!inRange) {\n        this.layout_.contentWrpEl_.removeAttribute('size');\n      }\n    }\n  }\n\n\n  init() {\n    this.render();\n  }\n\n  render() {\n    this.layout_ = new ShoppableBarLayout(this.player_, this.options_);\n  }\n\n}\n\n\nexport default ShoppableWidget;\n","\n// Test for matches()/\nconst elMatches = (el, selector) => {\n  let p = Element.prototype;\n  let f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function (s) {\n    return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n  };\n  return f.call(el, selector);\n};\n\nexport { elMatches };\n","/**\n * Wraps the given function, `fn`, with a new function that only invokes `fn`\n * at most once per every `wait` milliseconds.\n *\n * @function\n * @param    {Function} fn\n *           The function to be throttled.\n *\n * @param    {number}   wait\n *           The number of milliseconds by which to throttle.\n *\n * @return   {Function}\n */\n\nfunction throttle(fn, wait) {\n  let last = window.performance.now();\n\n  const throttled = function(...args) {\n    const now = window.performance.now();\n\n    if (now - last >= wait) {\n      fn(...args);\n      last = now;\n    }\n  };\n\n  return throttled;\n}\n\nexport { throttle };\n","// https://github.com/csnover/js-iso8601/blob/master/iso8601.js\nconst numericKeys = [1, 4, 5, 6, 7, 10, 11];\n\nconst parseISO8601 = function (date) {\n  let timestamp = 0;\n  let struct = 0;\n  let minutesOffset = 0;\n\n  // ES5 §15.9.4.2 states that the string should attempt to be parsed as a Date Time String Format string\n  // before falling back to any implementation-specific date parsing, so that’s what we do, even if native\n  // implementations could be faster\n  //              1 YYYY                2 MM       3 DD           4 HH    5 mm       6 ss        7 msec        8 Z 9 ±    10 tzHH    11 tzmm\n  if ((struct = /^(\\d{4}|[+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2}))?)?(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{2})(?::(\\d{2}))?)?)?$/.exec(date))) {\n    // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\n    for (let i = 0, k; (k = numericKeys[i]); ++i) {\n      struct[k] = +struct[k] || 0;\n    }\n\n    // allow undefined days and months\n    struct[2] = (+struct[2] || 1) - 1;\n    struct[3] = +struct[3] || 1;\n\n    if (struct[8] !== 'Z' && struct[9] !== undefined) {\n      minutesOffset = struct[10] * 60 + struct[11];\n\n      if (struct[9] === '+') {\n        minutesOffset = 0 - minutesOffset;\n      }\n    }\n\n    timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\n  } else {\n    timestamp = NaN;\n  }\n\n  return timestamp;\n};\n\n// Convert time string i.e. '2:40' to seconds number (160)\n// Also allows h:m:s format and mm:ss, m:s etc.\nconst parseTime = function (hms) {\n  const [seconds, minutes, hours] = hms.split(':').reverse();\n  let sum = null;\n  if (!isNaN(seconds)) {\n    sum = (+hours || 0) * 60 * 60 + (+minutes || 0) * 60 + (+seconds);\n  }\n  return sum;\n};\n\nexport { parseISO8601, parseTime };\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["videojs","elMatches","dom","Component","getComponent","ShoppableProductsOverlay","ShoppablePanelToggle","CLD_SPBL_INNER_BAR","SHOPPABLE_PANEL_HIDDEN_CLASS","SHOPPABLE_PANEL_VISIBLE_CLASS","PLAYER_EVENT","ShoppableBarLayout","constructor","player","options","player_","addClass","contentWrpEl_","createEl","className","contentBannerEl_","options_","bannerMsg","appendChild","productsOverlay","el_","contentEl_","el","addChild","toggleIcon","clickHandler","togglePanel","dispose","removeLayout","open","removeClass","toggleClass","eventName","hasClass","trigger","startState","on","PLAY","currentTime","autoClose","indexOf","setTimeout","addEventListener","once","registerComponent","CLD_SPBL_TOGGLE_CLASS","CLD_SPBL_TOGGLE_CUSTOM_ICON_CLASS","CLD_SPBL_TOGGLE_ICON_CLASS","CLOSE_ICON_CLASS","ICON_CART_CLASS","SHOPPABLE_ANIMATION_CLASS","ClickableComponent","handleClick","event","preventDefault","stopPropagation","iconProps","iconAttrs","style","icon","PRODUCT_BAR_MIN","classList","add","remove","parseTime","find","SHOPPABLE_PRODUCTS_OVERLAY_CLASS","arguments","length","undefined","SHOW_PRODUCTS_OVERLAY","renderProducts","layout_","innerHTML","currentProducts","products","filter","product","hotspots","some","a","time","forEach","hotspot","hs","productName","productTooltip","tooltipPosition","productHotSpot","href","clickUrl","target","x","y","one","SEEKING","clearLayout","dimensions","currentDimensions","height","width","ImageSource","CLD_SPBL_IMAGE","CLD_SPBL_ITEM","SHOPPABLE_CLICK_ACTIONS","SHOPPABLE_HOVER_ACTIONS","widthTransformation","ShoppablePanelItem","initOptions","isDragged","getTitle","conf","title","setAttribute","productId","onHover","addOnHover","item","cloudinaryConfig","onClick","addOnClick","img","src","url","info","cldConf","action","OVERLAY","overlayText","args","overlay","switchImgSource","publicId","transformation","hoverImg","pause","SEEk","GO_TO","assign","throttle","CLD_SPBL_PANEL_CLASS","ShoppablePanel","itemChangeHandler","render","SHOPPABLE_ITEM_CHANGED","off","map","cls","removeAll","childrens","children","i","removeChild","getItems","cloudinary","startTime","endTime","imageSource","imageSrc","scrollToActiveItem","activeItems","getElementsByClassName","toScroll","offsetTop","document","documentElement","scrollTo","top","behavior","scrollTop","items","throttledScrollToActiveItem","index","shoppablePanelItem","next","current","e","currentTarget","evName","ended","dataset","clickAction","window","gotoUrl","gotoSecs","seek","postModal","close","play","TIME_UPDATE","contains","ShoppablePostWidget","postPlay","handleDragToScroll","slider","querySelector","isDown","startX","scrollLeft","pageX","offsetLeft","walk","Math","abs","panel","bgSrc","currentPoster","toOptions","effect","panelBg","replayBtn","onclick","createModal","name","uncloseable","SHOPPABLE_WIDGET_OPTIONS_DEFAULTS","location","quality","fetch_format","crop","showPostPlayOverlay","ShoppableWidget","obj","merge","ENDED","_injectCSS","_setListeners","resizeHandler","_resizeHandler","bind","RESIZE","removeEventListener","css","createElement","shoppableBarBreakpoints","shoppableBarWidth","parseFloat","clientWidth","inRange","min","max","removeAttribute","init","selector","p","Element","prototype","f","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","s","call","querySelectorAll","fn","wait","last","performance","now","throttled","numericKeys","parseISO8601","date","timestamp","struct","minutesOffset","exec","k","Date","UTC","NaN","hms","seconds","minutes","hours","split","reverse","sum","isNaN"],"sourceRoot":""}